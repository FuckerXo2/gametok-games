<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Asteroids</title>
    <script src="jquery-1.4.1.min.js"></script>
    <script src="vector_battle_regular.typeface.js"></script>
    <script src="ipad.js"></script>
    <script src="game.js"></script>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      html, body { 
        width: 100%; 
        height: 100%; 
        overflow: hidden; 
        background-color: #000;
        touch-action: none;
      }
      #game-container { 
        width: 100%; 
        height: 100%; 
        display: flex; 
        justify-content: center; 
        align-items: center;
        position: relative;
      }
      #canvas { 
        width: 100%; 
        height: 100%; 
        background-color: #000;
        display: block;
      }
      /* Mobile touch controls */
      .touch-controls {
        position: fixed;
        bottom: 20px;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-between;
        padding: 0 20px;
        z-index: 100;
        pointer-events: none;
      }
      .control-group {
        display: flex;
        gap: 10px;
        pointer-events: auto;
      }
      .touch-btn {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: rgba(255,255,255,0.2);
        border: 2px solid rgba(255,255,255,0.5);
        color: white;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        -webkit-user-select: none;
      }
      .touch-btn:active {
        background: rgba(255,255,255,0.4);
      }
      .fire-btn {
        width: 80px;
        height: 80px;
        background: rgba(255,0,0,0.3);
        border-color: rgba(255,0,0,0.6);
      }
      @media (min-width: 768px) {
        .touch-controls { display: none; }
      }
    </style>
  </head>
  <body>
    <div id="game-container">
      <canvas id="canvas"></canvas>
    </div>
    <div class="touch-controls">
      <div class="control-group">
        <div class="touch-btn" id="touch-left">◀</div>
        <div class="touch-btn" id="touch-up">▲</div>
        <div class="touch-btn" id="touch-right">▶</div>
      </div>
      <div class="control-group">
        <div class="touch-btn fire-btn" id="touch-fire">●</div>
      </div>
    </div>
    <script>
      // Resize canvas to fill screen
      function resizeCanvas() {
        var canvas = document.getElementById('canvas');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener('resize', resizeCanvas);
      resizeCanvas();
      
      // Touch controls
      function setupTouchControl(id, keyCode) {
        var el = document.getElementById(id);
        if (!el) return;
        
        el.addEventListener('touchstart', function(e) {
          e.preventDefault();
          KEY_STATUS.keyDown = true;
          KEY_STATUS[KEY_CODES[keyCode]] = true;
        });
        el.addEventListener('touchend', function(e) {
          e.preventDefault();
          KEY_STATUS.keyDown = false;
          KEY_STATUS[KEY_CODES[keyCode]] = false;
        });
      }
      
      // Wait for game to load
      setTimeout(function() {
        setupTouchControl('touch-left', 37);  // left arrow
        setupTouchControl('touch-up', 38);    // up arrow (thrust)
        setupTouchControl('touch-right', 39); // right arrow
        setupTouchControl('touch-fire', 32);  // space (fire)
      }, 500);
    </script>
  </body>
</html>
